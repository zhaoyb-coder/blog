---
title: Mybatis源码
date: 2023-12-04 18:44:16
permalink: /be/935152/
categories:
  - 源码
tags:
  - Mybatis
author: 
  name: zhaoyb
  link: https://github.com/zhaoyb-coder

---

# Mybatis源码解读

## 一、整体调用流程

![image-20231204185355201](https://raw.githubusercontent.com/zhaoyb-coder/pic-repo/main/image-20231204185355201.png)



代码流程解析

![image-20231204185502249](https://raw.githubusercontent.com/zhaoyb-coder/pic-repo/main/image-20231204185502249.png)

### 1、项目使用的设计模式整理：

- 适配器模式
  - logging包：JakartaCommonsLoggingImpl是一个典型的对象适配器，内部持有了Log对象，然后把所有方法委托给了该对象
- 模板模式
  - Type包：BaseTypeHandler中的getResult方法完成了一系列 的异常处理工作，而与类型相关的getNullableResult操作则通过抽象方法交给具体的类型处理器，这就是典型的模板模式
- 单例模式
  - IO包：VFS包含的VFSHolder就是一个单例
- 代理模式
  - IO包：JBoss6VFS类中的ViryualFile是JBoss中的ViryualFile的静态代理类
  - logging：jdbc子包使用代理模式，让mybatis能够打印jdbc的操作日志，方便进行调试
  - binding包：数据库接入MapperProxy
- 建造者模式：
  - builder包
- 工厂模式
  - datasource包
- 装饰器模式
  - cache包
- 责任链模式
  - plugin包

## 二、源码结构展示
![](https://raw.githubusercontent.com/zhaoyb-coder/pic-repo/main/20231210114653.png)


